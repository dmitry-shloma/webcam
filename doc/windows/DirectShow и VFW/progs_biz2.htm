
<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
  <head>
    
<title>progs.biz</title>
<meta content="MSHTML 6.00.2800.1106" name="GENERATOR">
<meta content="C#" name="CODE_LANGUAGE">
<!-- Переделать - отдельно для каждой страницы -->
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta name="Description" content="Портал по программированию">
<meta name="Keywords" content="C++, C, Visual C++, Visual Basic, Basic, VB, VBA, MFC, ATL, COM, DCOM, COM+, ActiveX, Delphi, Pascal, VCL, Kylix, Internet, ADO, SQL, SQL Server, ASP, FAQ, HTML, DHTML, JavaScript, MTC, Office XP, Access, Интернет, freeware, download, базы данных, shareware, программирование, программы, Inet, учебники, уроки, рефераты">
<span id="_ctl0_Meta1_cssfile"><link href="/css/styles.css" type="text/css" rel="stylesheet"></span>

    <meta content="http://schemas.microsoft.com/intellisense/ie5" name="vs_targetSchema">
  </head>
  <body bottommargin="5" leftmargin="5" topmargin="5" rightmargin="5" ms_positioning="GridLayout"
    marginheight="0" marginwidth="0">
    <!-- Begin Form -->
      <table cellspacing="0" cellpadding="0" width="100%" border="0">
        <tbody>
          <tr>
            <td>
              <table class="Style1" cellspacing="0" cellpadding="0" width="100%" border="0">
                <tbody leftmargin="15">
                  <tr>
                    <td align="left" width="100%" height="100%" class="title">progs.biz</td>
                    <td valign="top">&nbsp;
                    </td>
                  </tr>
                </tbody>
              </table>
              <table class="Style1" cellspacing="0" cellpadding="0" width="100%" border="0">
                <tbody>
                  <tr valign="top">
                    <td width="100%" colspan="2"><span>
                        <table class="MVMenuHorizontalGroup" style="Z-INDEX: 999" cellspacing="1" cellpadding="0"
                          width="100%" border="0">
                          <tbody>
                            <tr>
                              <!-- Begin HMenu -->
                              <span id="_ctl0_HMenu1_menu"><td nowrap class="HMenuItem" onclick="document.location.href='/index.aspx';"onmousedown="this.className='HMenuItemDown';" onmouseup="this.className='HMenuItemOver';" onmouseover="this.className='HMenuItemOver';" onmouseout="this.className='HMenuItem';">Начало</td><td width="1%" class="HMenuSeparator">></td><td nowrap class="HMenuItem" onclick="document.location.href='/directx/directx01.aspx';"onmousedown="this.className='HMenuItemDown';" onmouseup="this.className='HMenuItemOver';" onmouseover="this.className='HMenuItemOver';" onmouseout="this.className='HMenuItem';">DirectX</td><td width="1%" class="HMenuSeparator">></td><td nowrap class="HMenuItem" onclick="document.location.href='/directx/direct3d/direct3d01.aspx';"onmousedown="this.className='HMenuItemDown';" onmouseup="this.className='HMenuItemOver';" onmouseover="this.className='HMenuItemOver';" onmouseout="this.className='HMenuItem';">Direct 3D</td><td width="1%" class="HMenuSeparator">></td><td nowrap class="HMenuItem" onclick="document.location.href='/directx/direct3d/vc/vc01.aspx';"onmousedown="this.className='HMenuItemDown';" onmouseup="this.className='HMenuItemOver';" onmouseover="this.className='HMenuItemOver';" onmouseout="this.className='HMenuItem';">VC++.NET</td><td width="1%" class="HMenuSeparator">></td><td nowrap class="HMenuItem">Урок 2</td><td width="100%"></td></span>

                              <!-- End HMenu -->
                            </tr>
                          </tbody>
                        </table>
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td>
              <table cellspacing="0" cellpadding="0" width="100%" border="0">
                <tbody>
                  <tr valign="top" height="*">
                    <!-- Begin LeftPanel -->
                    
<td width="160">
  <table width="100%" border="0" cellpadding="0" cellspacing="0">
    <tbody>
      <tr valign="top">
        <td valign="top" width="100%" bgcolor="#ffffff">
          <table class="flyoutMenu" style="BORDER-TOP-WIDTH: 1px; BORDER-LEFT-WIDTH: 1px; BORDER-BOTTOM-WIDTH: 1px; BORDER-RIGHT-WIDTH: 1px"
            cellspacing="0" cellpadding="2" width="100%" border="0">
            <tbody>
              <tr>
                <td>
                  <!-- Begin Вертикальное меню -->
                  
<table cellspacing="0" cellpadding="0" width="150" border="0">
  <tbody>
    <span id="_ctl0_RightPanel1_VMenu1_menu">  <tr>
    <td class="VMenuItem" onclick="document.location.href='/csharp/csharp01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">C#
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/vbnet/vbnet01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">VB.NET
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/vcnet/vcnet01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Visual C++.NET
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/aspnet/aspnet01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">ASP.NET
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/vc/vc01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Visual C++ 6
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/winapi/winapi01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">WinAPI
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/cpp/cpp01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">C/C++
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/delphi/delphi01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Delphi
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/cppbuilder/cppbuilder01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">C++ Builder
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/java/java01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Java
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/php/php01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">PHP
    </td>
  </tr>
  <tr>
    <td class="VMenuItemCurr" onclick="document.location.href='/directx/directx01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItemCurr';">DirectX
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/vb6/vb01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Visual Basic 6.0
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/asm/asm01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Ассемблер
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/inet/inet01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Интернет
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/sysprog/sysprog01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Сист. прогр-ние
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/pocketpc/pocketpc01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Pocket PC
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/booksrev/booksrev01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Обзор книг
    </td>
  </tr>
  <tr>
    <td class="VMenuItem" onclick="document.location.href='/softrev/softrev01.aspx'";
      onmousedown="this.className='VMenuItemDown';" onmouseup="this.className='VMenuItemOver';";
      onmouseover="this.className='VMenuItemOver';" onmouseout="this.className='VMenuItem';">Обзор программ
    </td>
  </tr>
</span></tbody></table>

                  <!-- End Вертикальное меню -->
                </td>
              </tr>
              <tr>
              </tr>
            </tbody>
          </table>
        </td>
      </tr>
    </tbody>
  </table>
  <span id="_ctl0_RightPanel1_MyOzon1_ozonText"><p class ="columnOzon"><a href="http://www.ozon.ru/context/detail/id/1512310/?partner=gufi4312" target="_blank" class="columnOzon"><strong>Фленов М.</strong> Программирование в Delphi глазами хакера.<br><img class="column" src="http://progs.biz/booksrev/delphi/lessons/images/010_01.gif" width="60" height="86" alt="Фленов М. Программирование в Delphi глазами хакера." border="0"><br>Заказать на Озоне</a></p></span>

  <hr>
  <!-- End Киркоров -->
  <table align="center" bgcolor="#ffffff" width="100%">
    <tr align="center">
      <td>
        <!-- Begin Счетчики -->
        
<!-- SpyLOG f:0211 -->
<script language="javascript"><!--
Mu="u3549.23.spylog.com";Md=document;Mnv=navigator;Mp=0;
Md.cookie="b=b";Mc=0;if(Md.cookie)Mc=1;Mrn=Math.random();
Mn=(Mnv.appName.substring(0,2)=="Mi")?0:1;Mt=(new Date()).getTimezoneOffset();
Mz="p="+Mp+"&rn="+Mrn+"&c="+Mc+"&t="+Mt;
if(self!=top){Mfr=1;}else{Mfr=0;}Msl="1.0";
//--></script><script language="javascript1.1"><!--
Mpl="";Msl="1.1";Mj = (Mnv.javaEnabled()?"Y":"N");Mz+='&j='+Mj;
//--></script><script language="javascript1.2"><!-- 
Msl="1.2";Ms=screen;Mpx=(Mn==0)?Ms.colorDepth:Ms.pixelDepth;
Mz+="&wh="+Ms.width+'x'+Ms.height+"&px="+Mpx;
//--></script><script language="javascript1.3"><!--
Msl="1.3";//--></script><script language="javascript"><!--
My="";My+="<a href='http://"+Mu+"/cnt?cid=354923&f=3&p="+Mp+"&rn="+Mrn+"' target='_blank'>";
My+="<img src='http://"+Mu+"/cnt?cid=354923&"+Mz+"&sl="+Msl+"&r="+escape(Md.referrer)+"&fr="+Mfr+"&pg="+escape(window.location.href);
My+="' border=0 width=88 height=31 alt='SpyLOG'>";
My+="</a>";Md.write(My);//--></script><noscript>
<a href="http://u3549.23.spylog.com/cnt?cid=354923&f=3&p=0" target="_blank">
<img src="http://u3549.23.spylog.com/cnt?cid=354923&p=0" alt='SpyLOG' border='0' width=88 height=31 >
</a></noscript>
<!-- SpyLOG -->
<hr>
<a href="http://www.yandex.ru/cy?base=0&host=progs.biz">
<img src="http://www.yandex.ru/cycounter?progs.biz" width=88 height=31 alt="Яндекс-цитирования" border=0>
</a>
        <!-- End Счетчики -->
      </td>
    </tr>
  </table>
</td>

                    <!-- End LeftPanel-->
                    <td height="347" width="100%" class="cont">
                      <table width="100%" cellpadding="5">
                        <tbody>
                          <tr>
                            <td>

<!-- Begin Content -->
<h2>Direct3D для Visual C++<br>Урок 2. Подготовительная работа - делаем окно</h2>
<p>На этом занятии мы с вами сделаем простой окно с помощью API-функций. Без этого никуда не деться - разное высокоуровневое создание окон (как, например, с помощью MFC, подходит мало - нам нужна скорость и компактность программы).</p>
<p>Для начала запустите Visual C++, нажмите Ctrl+N для создания нового проекта и выберите тип приложения Win32 Aplication. В поле Project name задайте имя проекта. Пусть имя для определености будет dx. Нажмите OK. В двух появившихся после этого окошках нажмите Finish и OK, ничего не меняя.</p>
<p>Пустой проект создан. Теперь надо добавить в него файл *.cpp. Именно в этом файле мы и будем писать текст нашей программы. Для добавления файла снова нажмите Crtl+N. В появившемся диалоговом окошке New выберите тип файла C++ Source File, введите в поле File name в качестве имени файла dx (имя произвольное) и нажмите на OK. Все! Теперь в нашем проекте есть файл dx.cpp. Введите в этот файл следующий текст:</p>
<span><pre class = "cpp"><u>#include</u> &lt;windows.h&gt;
LONG WINAPI WndProc(HWND, UINT, WPARAM,LPARAM);
<u>int</u> WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR     lpCmdLine,
                   <u>int</u>       nCmdShow)
{
    HWND hwnd;
    MSG msg;
    WNDCLASS w;
    memset(&amp;w, 0, <u>sizeof</u>(WNDCLASS));
    w.style = CS_HREDRAW | CS_VREDRAW;
    w.lpfnWndProc = WndProc;
    w.hInstance = hInstance;
    w.hbrBackground = (HBRUSH)GetStockObject(WHITE_BRUSH);
    w.lpszClassName = "My Class";
    RegisterClass(&amp;w);
    hwnd = CreateWindow("My Class", "My title", WS_OVERLAPPEDWINDOW,
        300, 200, 200, 180, NULL, NULL, hInstance, NULL);
    ShowWindow(hwnd,nCmdShow);
    UpdateWindow(hwnd);
    <u>while</u>(GetMessage(&amp;msg,NULL,0,0))
    {
        TranslateMessage(&amp;msg);
        DispatchMessage(&amp;msg);
    }
    <u>return</u> msg.wParam;
}

LONG WINAPI WndProc(HWND hwnd, UINT Message, WPARAM wparam, LPARAM lparam)
{
    <u>switch</u> (Message){
    <u>case</u> WM_DESTROY: 
        PostQuitMessage(0);
        <u>break</u>;
    <u>default</u>:
        <u>return</u> DefWindowProc(hwnd, Message, wparam, lparam);
    }
    <u>return</u> 0;
}</pre></span>
<p>Запустите программу (Ctrl+F5). Если ошибок нет, то появится окно нашей программы.</p>
<p>Приведенный текст мы разбирать не будем. Если кому интересно, то разбор смотрите в другом разделе сайта - по <a href="/winapi/winapi/winapi01.aspx">WinAPI</a> (уроки 1-3 и далее).</p>
<!-- End Content -->

                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                    <td width="160">
                      <table width="100%" border="0" cellpadding="0" cellspacing="0">
                        <tbody>
                          <tr valign="top">
                            <td valign="top" width="100%" bgcolor="#ffffff">
                              <table class="flyoutMenu" style="BORDER-TOP-WIDTH: 1px; BORDER-LEFT-WIDTH: 1px; BORDER-BOTTOM-WIDTH: 1px; BORDER-RIGHT-WIDTH: 1px"
                                cellspacing="0" cellpadding="2" width="100%" border="0" menudata="#hpflyoutTop">
                                <tbody>
                                  <tr>
                                    <td>
                                      <table cellspacing="0" cellpadding="0" width="150" border="0">
                                        <tbody>
                                          <tr>
                                            <td>
                                          	<!-- Begin Subscribe -->
                                          	
<form action="http://subscribe.ru/member/quick" method="get">
  <input type="hidden" name="action" value="quick">
  <table border="1" cellspacing="0" cellpadding="2" class="column">
    <tr>
      <td bgcolor="#fcf5e9" align="center">
        Рассылки нашего сайта на <a href="http://subscribe.ru/" target="_blank">Subscribe.Ru</a>
      </td>
    </tr>
    <tr>
      <td bgcolor="#f1f1f1" align="left" valign="middle">
        <input type="checkbox" name="grp" value="comp.soft.prog.lessonsfromai" checked>Visual 
        C++, MFC<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.csharplessons" checked>C# 
        и .NET<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.vblessons" checked>VB.NET<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.asplessons" checked>ASP.NET <font color="red">new!</font><br>
        <input type="checkbox" name="grp" value="comp.soft.prog.winapilessons" checked>Win 
        API<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.cpplessons" checked>C/C++<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.delphilessons" checked>Delphi<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.javalessons" checked>Java<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.weblessons" checked>HTML, 
        PHP, mySQL, WEB-дизайн<br>
        <input type="checkbox" name="grp" value="comp.soft.graph.flashlessons" checked>Flash 
        MX<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.builderlessons" checked>C++ 
        Builder<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.masmlessons" checked>Ассемблер<br>
        <input type="checkbox" name="grp" value="comp.soft.db.sqllessons" checked>SQL 
        Server<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.directxlessons" checked>DirectX<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.booksrev" checked>Обзор 
        книг<br>
        <input type="checkbox" name="grp" value="comp.soft.review.newprogs" checked>Обзор 
        программ<br>
        <input type="checkbox" name="grp" value="comp.soft.prog.newlessons" checked>Новости 
        сайта progs.biz
      </td>
    </tr>
    <tr>
      <td bgcolor="#ffffff" align="center" valign="middle">
        <input type="text" name="email" size="20" maxlength="100" value="Ваш e-mail" style="FONT-SIZE: 9pt">
        <input name="_ctl2:_ctl0:Submit1" id="_ctl2__ctl0_Submit1" type="submit" value="OK" style="FONT-SIZE: 9pt" />
      </td>
    </tr>
  </table>
</form>

                                            <!-- Begin Subscribe -->
                                            </td>
                                          </tr>
                                          
                                          <!--
                                          <tr>
                                            <td class="flyoutLink">Реклама</td>
                                          </tr>
                                          -->
                                        </tbody>
                                      </table>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <hr>
                              <table cellspacing="0" cellpadding="0" width="150" border="0">
  <tr>
                                            <td align="center">
                                            <a href="http://www.parking.ru/" target="_blank"><img src="/images/logo_parking.gif" border="0" width="100" height="30"><br><a href="http://www.parking.ru" target="_blank">Хостинг от компании Parking.ru</a>
                                            </td>
                                          </tr></table>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
          <tr>
            <td nowrap width="750">&nbsp;</td>
          </tr>
          <tr>
            <td align="center"><span>
                &nbsp;</span></td>
          </tr>
          <tr>
            <td>
              <table class="Style1" height="10" cellspacing="0" cellpadding="0" width="100%">
                <tbody>
                  <tr>
                    <td align="right" class="CWFooter">
                    Копирование любых материалов сайта без разрешения авторов и владельцев сайта запрещено.<br>
                    <a href="http://progs.biz" target="_top">© 2002-2006 сайт progs.biz</a><br>
                      <a href="mailto:progsbiz@mail.ru?subject=progs.biz" target="_top">© 2002-2006 Игорь Алексеев</a>
                    </td>
                  </tr>
                </tbody>
              </table>
            </td>
          </tr>
        </tbody>
      </table>
    <!-- End Form -->
  </body>
</html>